<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()])</script>
    <title>
        Play KOTOROnline | Free Online Game | DHK Games
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/games/ko/cdreplat1/static/usjij0vnlh2CZfDkdEkh53Fk5qvnCZYN8wdobRec30A.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="/games/ko/cdreplat1/static/58OO7QmKXbmnS9XJimJ7mR2ojKIY3SzZ3YhD9bNCenX.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/games/ko/cdreplat1/static/6emTJeZs15ZprPQVOMWhwdDrxzVfwcToL9XWeFKfX36.png">
    
    
    
    
    <meta charset="utf-8" content=""/>
    <meta name="layout" content="launch"/>
    <link href="/games/ko/cdreplat1/static/game.css" rel="stylesheet" media="screen,projection"/>
    <script type="text/javascript" src="HTTP://dhkgames.com/games/ko/cdreplat1/valorLaunch/sso?_=3e563005ef394272ac5aaf71cc7b64dd"></script>

    <link rel="alternate" type="application/rss+xml" title="News and Press" href="//www.dhkgames.com/rss"/>
    <link rel="alternate" type="application/rss+xml" title="Company News" href="//www.dhkgames.com/rss/news"/>
    <link rel="alternate" type="application/rss+xml" title="Press Mentions" href="//www.dhkgames.com/rss/press"/>
    <link rel="alternate" type="application/rss+xml" title="Blog" href="//www.dhkgames.com/rss/blog"/>
    <link rel="alternate" type="application/rss+xml" title="Valor Updates" href="//www.dhkgames.com/rss/valor"/>

    <script type="text/javascript">(function (H) {
        H.className = H.className.replace(/\bno-js\b/, 'js')
    })(document.documentElement)</script>

    <meta property="og:image" content="http://photos-e.ak.fbcdn.net/photos-ak-snc1/v43/172/185752794812932/app_1_185752794812932_9141.gif"/>
    <meta property="og:title" content="Valor"/>
    <meta property="og:type" content="game"/>
    <meta property="og:description" content="http://apps.facebook.com/cdrefaceonedevo/"/>
    <meta property="og:title" content="Valor Game"/>
    <meta property="og:url" content="http://apps.facebook.com/cdrefaceonedevo/"/>
    <meta property="og:site_name" content="Valor Games"/>
    <meta property="fb:admins" content="523858195"/>

    
    
    

    
    
    
    
    <style>
#liveGamer1_div {
    display:none;
    position:absolute;
    top: 0;
    left: 50%;
    margin-left: -412px;
    z-index: 10000;
}
#cashin_overlay {
    position: fixed;
    z-index:100;
    top: 0px;
    left: 0px;
    height:100%;
    width:100%;
    background: #000;
    display: none;
}



#cashin_close {

    background:url(../images/KOTOROnline-ui-paywall_button_v2.png) no-repeat;
    top: 5px;
    margin-left: 330px;

    width:49px;
    height:46px;
    display: none;
    z-index: 11000;
    position: absolute;
    left: 50%;
    cursor:pointer;
}

#cashin_close:hover {
    background-position: 0 -46px;
}



</style>

    <link href="/games/ko/cdreplat1/static/3FAk8HuM56vMZpy2LPUtFi7uCnhnZEeS5Tnzr1Q9nTi.css" type="text/css" rel="stylesheet" media="screen, projection" />

</head>
<body>





<div id="header">
    <h1 class="logo alt" id="logo">Valor</h1>
    <ul id="idPlatinum" style="display: none;" class="nav">
        <li><a href="#" class="alt invite" onclick="launchInviteFriends()">Invite</a></li>
        
        <li><a href="#" class="alt cash" onclick="requestCashin()">Add Platinum</a></li>
    </ul>
    <ul class="nav utility">
        <li><a href="http://forums.dhkgames.com/forumdisplay.php?4-KOTOROnline" class="alt forum" target="_blank">Forum</a></li>
        
        <li><a href="HTTP://support.dhkgames.com" class="alt help" target="_blank">Help</a></li>
        
    </ul>
</div>


<div id="gameHolder" style="position:relative; height:720px;">
    <div id="liveGamer1_div">
        
        <div id="liveGamer1_innerDiv"></div>
    </div>
    <a id="cashin_close" href="#"></a>


    <div id="game" style="position:absolute;">
        <iframe id="MainIframe" src="http://dhkgames.com/games/ko/one.html" width="960" height="720" scrolling="no"></iframe>
    </div>
</div>

<div id="content">
    <div class="wrapper">

        <div id="footer">
            <p>
                <a href="//www.dhkgames.com/" target="_blank" class="alt logo">DHK</a>
            </p>

            <p>
                <strong>&copy; 2013 DHK Games</strong>
                All Rights Reserved
            </p>
            <ul>
                <li><a href="//www.dhkgames.com/terms-of-service" target="_blank">Terms of Service</a></li>
                <li><a href="//www.dhkgames.com/privacy-policy" target="_blank">Privacy Policy</a></li>
                <li><a href="http://forums.dhkgames.com/forumdisplay.php?19-Feedback" target="_blank">Beta Feedback</a></li>
                
                
                
            </ul>
        </div>

    </div>
</div>


    





<script src="jquery.min.js" type="text/javascript" ></script>
<script src="/games/ko/cdreplat1/static/U1xr9hY2maI4VYZdqJ4RV7l0PEI1ayZJQEjPr09glWw.js" type="text/javascript" ></script>





<script src="/games/ko/cdreplat1/static/LRNFMqDRSFfolAoHC12SsKk08rKj2Rsgok7UrLjrbGt.js" type="text/javascript" ></script>
<script type="text/javascript">

    //==============================
    //===
    //==============================
    //Set the document domain so that the paywall can call the parent frame
    document.domain = "dhkgames.com"

    //MLF: RAPI is the api to the DHK Platform
    if (typeof RAPI == "undefined" || !RAPI) {
        var RAPI = {
            user:{}
        };
    }

    //MLF: RG are general dhkgames useful libraries.
    if (typeof RG == "undefined" || !RG) {
        var RG = {};
    }

    RG.console = {
        log:function () {
            //noinspection JSUnusedLocalSymbols
            var ignore = arguments
        }
    };

    if (typeof window.console == 'undefined') {
        window.console = {
            log:function () {
            }
        };
    } else {
        RG.console = window.console;
    }


    RG.console.log(["Console setup", new Date().getTime(), new Date()]);

    RAPI.user = {
        id:'8094fa4a35514ed0b89ef84b18f6c53f',
        name:'fullname',
        net:''
    };

    function onFlashHide(info) {
        RG.console.log(["onFlashHide", info]);

      if(info.state == 'opened') {
        hideSwf();
      } else {
        showSwf();
      }
    }

   function rxFbCb(fbResult) {
            console.log(["Payment Dialog Closed", fbResult]);
            if (fbResult['status'] != 'completed'){
                closeCashin();
                return
            }

            hideSwf();
            if (fbResult != null){
                fbResult['lgUserId'] = "4025724";
                fbResult['game'] = "kr";
                fbResult['gukey'] = "8094fa4a35514ed0b89ef84b18f6c53f"

                $.ajax({
                    url: "HTTP://dhkgames.com/paywall/FbCallback/purchase",
                    data:fbResult,
                    type: "POST",
                    context: document.body,
                    success: function(){
                        showSuccessPage();
                    }
                });
            }
    }

    function showSuccessPage(){
        (function ($) {

            if (RG.cashinUrl) {
                $('#liveGamer1_innerDiv').replaceWith('<iframe id="liveGamer1_innerDiv" width="800" height="660" style="background-color:transparent;" scrolling="no" frameborder="0"></iframe>');
                $('#liveGamer1_innerDiv').attr('src', RG.cashinUrl+'&success=true&_'+(new Date).getTime());
            }
        })(jQuery);
    }

    function submitFBPurchase(data) {
        console.log(["SubmitFBPurchase", data]);
        FB.ui(
            {
            method: 'pay',
            action: 'purchaseitem',
            product: data,
            quantity: 1
            },
            rxFbCb
            );
    }

    function checkElementVisible(testEl) {
        var offset = jQuery(testEl).offset();
        var el = document.elementFromPoint(offset.left, offset.top);
        //        RG.console.log(["checkElementVisible", el, testEl, el==testEl, testEl.prototype, testEl.properties, testEl.offsetLeft, testEl.offsetTop, jQuery(testEl).offset(), "Found: "+el.nodeName]);

        return (testEl == el);
    }

    function hideSwf() {
        //MLF:Don't notify the game a second time if already open
        RG.console.log(["hideSwf", window.purchaseOpen]);
        if (window.purchaseOpen) return;

        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder


        var swfEl = document.getElementById('game');  //MainIframeHolder
        swfEl.style.top = '-10000px';

        jQuery.postMessage( 'noteHideSwf', "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );

    }

    function showSwf() {
        //MLF:Don't show a second time if already open
        RG.console.log(["showSwf", window.purchaseOpen]);
        if (window.purchaseOpen){
          return;
        }

        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder
        var swfEl = document.getElementById('game');
        swfEl.style.top = '';
//        jQuery(swfEl).css('visibility', 'visible'); //.show(); // = true;

        jQuery.postMessage( 'noteShowSwf', "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
    }

    function sendCashin() {
        RG.console.log(["sendCashin"]);
        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder
        jQuery.postMessage( 'doCashin', "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
    }


    function requestCashin() {
        RG.console.log(["requestCashin", window.purchaseOpen]);
        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder

        

        jQuery.postMessage( 'requestCashin', "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
    }


    function openStore(storeType) {
        RG.console.log(["openStore"]);
        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder

        if (storeType == null) {
            jQuery.postMessage( 'openStore', "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
        } else {
            var message = {
                "message" : "openStore",
                "storeType" : storeType
            };
            jQuery.postMessage( message, "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
        }
    }

    //onclick="util.closeLB({changeToken:Playspan.changeToken,serviceCode:Playspan.serviceCode,token:Playspan.token});"
    window.purchaseOpen = false;
    var disableCheck = false;

    function closeCashin () {
        (function ($) {
            $("#cashin_overlay").fadeOut(200);
            $("#liveGamer1_div").fadeOut(200);
            
            $("#cashin_close").fadeOut(200);
            
            window.purchaseOpen = false;
            showSwf();
            window.disableCheck = false;
            loadCashin();
        })(jQuery);
    }

    function loadCashin() {
        (function ($) {
            if (RG.cashinUrl) {
                $('#liveGamer1_innerDiv').replaceWith('<iframe id="liveGamer1_innerDiv" width="800" height="660" style="background-color:transparent;" scrolling="no" frameborder="0"></iframe>');
                $('#liveGamer1_innerDiv').attr('src', RG.cashinUrl+'&_'+(new Date).getTime());
            }
        })(jQuery);
    }

    jQuery(function($) {
        $("body").append('<div id="cashin_overlay"></div>');
        $.ajax({
            cache: false,
            url: "/games/ko/cdreplat1/rapiCommerce/prepareCashin?game=kr&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&channel=rg",
            success:function (data) {
                RG.console.log("prepareCashin returned url: " + data.url);
                RG.cashinUrl = data.url;
                loadCashin();
            },
            failure:function () {
                RG.console.log("prepareCashin failed");
            }
        });
    });

    function doCashin() {
        (function ($) {
            if (RG.cashinUrl) {
                hideSwf();
                var overlay_selector = "#cashin_overlay";
                var cashin_selector = "#liveGamer1_div";
                var modal_height = $(cashin_selector).outerHeight();
                var modal_width = $(cashin_selector).outerWidth();
                $(overlay_selector).css({"display": "block", opacity: 0});
                $(overlay_selector).fadeTo(100,.65);
                $(cashin_selector).fadeTo(200,1);
                window.purchaseOpen = true;
                window.disableCheck = true;
                
                var close_selector = "#cashin_close";
                $(close_selector).css({"display": "block", opacity: 100});
                $(close_selector).click(closeCashin);
                

                    $.ajax({
                        cache: false,
                        url: "/games/ko/cdreplat1/rapiCommerce/openCashin?game=kr&channel=rg&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f",
                        success:function () {
                        RG.console.log("openCashin succeeded");
                    },
                    failure:function () {
                        RG.console.log("openCashin failed");
                    }
                });
            }
        })(jQuery);
    }

    window.lastPart = "";

    jQuery(function () {

        jQuery.receiveMessage (
            function(e) {
                //RG.console.log("Parent Received: "+e.data);
                var data = e.data;

                if (data === 'doCashin') {
                    doCashin();
                } else if (data === 'launchInviteFriends') {
                    launchInviteFriends();
                } else if (data === 'refreshBrowser') {
                    refreshBrowser();
                } else {
                    //Assume it needs to be deserialized
                    var parameters = jQuery.deparam(data);
                    var FB_RPC = "_FB_"+lastPart+"FB_RPC";

                    //RG.console.log([ "Parameters", parameters, parameters.origin, parameters.message, FB_RPC, parameters[FB_RPC] ]);

                    //Parent Received: _FB_fb6a1a484FB_RPC:{"jsonrpc":"2.0","id":1,"result":{"clientWidth":1519,"clientHeight":1004,"scrollLeft":0,"scrollTop":0,"offsetLeft":0,"offsetTop":38}}
                    //564Parent Received: _FB_fb6a1a484FB_RPC:{"jsonrpc":"2.0","method":"hideFlashObjects","params":[]}


                    if (parameters.origin) {
                        var originString = parameters.origin;
                        var parts = originString.split('/');
                        window.lastPart = parts.length == 0 ? "" : parts[parts.length-1];

                        RG.console.log(["Match",lastPart, parts, originString]);
                    } else {
                        //Actually the RPC is JSON vs. parameterized.  So let's parse it:
                        var colonIndex = data.indexOf(":");

                        if (colonIndex > 0) {
                            var prefix = data.substring(0,colonIndex);
                            if (prefix == FB_RPC) {
                                var value = jQuery.parseJSON(data.substring(colonIndex+1));
                                //RG.console.log(["New parse",prefix, value, FB_RPC]);

                                if (value.method == "hideFlashObjects") {
                                    hideSwf();
                                } else if (value.method == "showFlashObjects") {
                                    showSwf();
                                } else {
                                    //Ignore unknown message
                                }
                            } else {
                                //RG.console.log(["Unrecognized: ",prefix, FB_RPC]);
                            }
                        }
                    }
                }
            }
        //    ,
        //    'http://localhost:8080/'
        );

    });

    function resizeGamePane(windowHeight) {
        var minHeight = 596; //Minimum SWF height
        var padding = 135;   //Show this much of the game frame

        var newHeight=  windowHeight - padding;

        if (newHeight < minHeight) {
            newHeight = minHeight;
        }

        $('#gameHolder').css('height', newHeight);
        $('#MainIframe').height(newHeight);

        
    }

    function launchInviteFriends() {
        
        var src = "/games/ko/cdreplat1/invite/index?accessToken=4738f89203844da0828e8d447222b9b8&game=4407e9bd675f17bc11e9d7f8f7002e89";
        $.modal('<iframe src="' + src + '" height="675" width="725" style="margin-top: 65px; border:0" scrolling="no">', {
            closeHTML:"",
            overlayClose:true,
            position: ['0'],
            onClose: function() {this.close(); showSwf()}
        });

        // Modal shows up behind SWF in FF and in Windows Chrome/IE
        if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1 || navigator.appVersion.indexOf("Win") > -1){
            hideSwf();
        }
        
    }

    function reportFriendsInvited(count) {
        console.log('Invited '+count+' friend(s)');
        var iframeEl = document.getElementById('MainIframe');  //MainIframeHolder
        var message = {
            "message" : "useBetaInvites",
            "count" : count
        };
        jQuery.postMessage(message, "HTTP://dhkgames.com/games/ko/deploymaster/?parentIsSecure=true&frameHeight=100%25&channel=rg&bucket=311&rumPlayer=8094fa4a35514ed0b89ef84b18f6c53f&fbAppId=267584336650726&token=4738f89203844da0828e8d447222b9b8&landingUrl=http://localhost:5000/games/ko/cdreplat1/grails/valorLaunch/rg.dispatch?game=kr&isSecure=true&requestId=3e563005ef394272ac5aaf71cc7b64dd&serverVersion=4e89b60d58198be1ec2ea0a453bc447c78723126", iframeEl.contentWindow );
    }

    function refreshBrowser() {
        
        location.reload(true);
        
    }

    jQuery(document).ready(function ($) {
    $('#logo').click(function() {
        refreshBrowser();
    });

    
    
        window.setTimeout(function() {
            $('#idFeatures,#idPlatinum').fadeIn(2000, function() {

            });
        },15000);
    

});


        
            $(window).resize(function() {
                resizeGamePane($(window).height());
            });
            function resizeLoop() {
                resizeGamePane($(window).height());
                window.setTimeout(resizeLoop, 1000);
            }
            $(document).ready(function() {
                resizeLoop();
            });
        
    </script>
<script type="text/javascript">if (!NREUMQ.f) { NREUMQ.f=function() {NREUMQ.push(["load",new Date().getTime()]);var e=document.createElement("script");e.type="text/javascript";e.src=(("http:"===document.location.protocol)?"http:":"HTTP:") + "//" + "js-agent.newrelic.com/nr-100.js";document.body.appendChild(e);if(NREUMQ.a)NREUMQ.a();};NREUMQ.a=window.onload;window.onload=NREUMQ.f;};NREUMQ.push(["nrfj","beacon-5.newrelic.com","04a846b036","2140298","YV1QYRRQCBZRVhENDlgXYFAXRAMWRHQREBNfWkdBAx4QBFxaFygAQ1ZRXUlDAQ==",0,617,new Date().getTime(),"","","","",""]);</script>
</body>
</html>